<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.537">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>argument-structure-in-clinical-populations</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="12 - Argument structure in clinical populations_files/libs/clipboard/clipboard.min.js"></script>
<script src="12 - Argument structure in clinical populations_files/libs/quarto-html/quarto.js"></script>
<script src="12 - Argument structure in clinical populations_files/libs/quarto-html/popper.min.js"></script>
<script src="12 - Argument structure in clinical populations_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="12 - Argument structure in clinical populations_files/libs/quarto-html/anchor.min.js"></script>
<link href="12 - Argument structure in clinical populations_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="12 - Argument structure in clinical populations_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="12 - Argument structure in clinical populations_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="12 - Argument structure in clinical populations_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="12 - Argument structure in clinical populations_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">




<section id="argument-structure-in-clinical-populations" class="level1">
<h1>12 - Argument Structure in clinical populations</h1>
<section id="argument-structure" class="level2">
<h2 class="anchored" data-anchor-id="argument-structure">1. Argument structure</h2>
<section id="a.-what-is-an-argument" class="level3">
<h3 class="anchored" data-anchor-id="a.-what-is-an-argument">a. What is an argument?</h3>
<p>Argument = <em>essential participant</em> in an event described by a verb, i.e.&nbsp;we cannot imagine the event without that participant.</p>
<p>Arguments are <em>often, but not always obligatory</em></p>
<p>An argument is a part of a <strong>proposition</strong> (which contains a <strong>predicate</strong>, e.g.&nbsp;event or relationship, and at least one argument). E.g. Mary kissed Jack -&gt; kiss(Mary, Jack)</p>
<p>Deciding how many verbs an argument has is not straightforward. For example,</p>
<ol type="1">
<li>She sneezed (valency = 1)</li>
<li>She sneezed a big bogey (valency = 2)</li>
<li>She sneezed | the handkerchief | off the table (valency = 3)</li>
</ol>
<p>So what valency is ‘sneeze’?</p>
<p>Arguments can be compared with <strong>adverbials</strong> /<strong>adjuncts</strong> which are non-essential participants, and therefore optional. Adverbials can also move around the sentence easily</p>
<p>Sometimes it is very difficult to distinguish between arguments and adverbials / adjuncts. It has even been suggested that theoretically, there is no absolute distinction.</p>
</section>
<section id="b.-what-is-argument-structure" class="level3">
<h3 class="anchored" data-anchor-id="b.-what-is-argument-structure">b. What is argument structure?</h3>
<p>Consists of</p>
<ol type="1">
<li><strong>valency</strong> (Number of arguments)</li>
<li><strong>roles</strong> they play in the sentence (<em>thematic roles, thematic relations</em>)</li>
</ol>
<p>A predominantly <strong>semantic</strong> level of representation, e.g.&nbsp;meaning of the verb determines both number of arguments and the roles they play. Roles are also semantic.</p>
<ol type="1">
<li>laugh <agent></agent></li>
<li>eat &lt;AGENT, PATIENT&gt;</li>
<li>give &lt;AGENT, BENEFACTIVE, PATIENT&gt;</li>
<li>receive &lt;BENEFACTIVE, PATIENT, AGENT&gt;</li>
</ol>
<p>Can be used to explain sentences such as</p>
<ol type="1">
<li>Patrick gave the ball to Mary</li>
<li>Mary received the ball from Patrick</li>
</ol>
<p>How can we explain different roles in subject position? They must be assigned by argument structure; give&lt;AGENT, BEN., PATIENT&gt; (underlining shows external argument)</p>
<p>With one major exception (the external argument), arguments are <strong>generally not marked for surface position</strong>, e.g.&nbsp;BENEFACTIVE can appear as direct or indirect object, e.g.&nbsp;<em>She gave him(BEN) the ball</em> versus <em>She gave the ball to him(BEN)</em></p>
<p>In fact, where a verb has more than one post-verbal argument, they may come in a variety of positions, e.g.</p>
<ol type="1">
<li>She gave him | the ball (DITRANSITIVE)</li>
<li>She gave the ball | to him (PREPOSITIONAL DATIVE)</li>
<li>He loaded the truck | with hay</li>
<li>He loaded the hay | onto the truck</li>
</ol>
<p>However, the same argument (<strong>external argument</strong>) is always linked to the subject position, and this must be specified in the argument structure. In this sense, argument structure interfaces with syntax.</p>
<p>Furthermore certain types of arguments may have syntactic consequences. For example, indirect objects are often marked with ‘to’, e.g.&nbsp;<em>he gave the ball <strong>to</strong> him</em>. In other languages, this might be marked with <em>case</em></p>
<p>Therefore argument structure lies <strong>somewhere between syntax and semantics</strong></p>
</section>
<section id="c.-do-we-need-argument-structure" class="level3">
<h3 class="anchored" data-anchor-id="c.-do-we-need-argument-structure">c.&nbsp;Do we need argument structure?</h3>
<p>Can’t we just plug the verb into the relevant syntactic frame?</p>
<ol type="1">
<li>Argument structure guides mapping process, e.g.&nbsp;by specifying the subject (external) argument.</li>
<li>Roles played by arguments seem to fall into a small set of neat classes, e.g.&nbsp;AGENT (doer), PATIENT (do-ee), BENEFACTIVE (receiver) etc. The level of argument structure formalises this intuition</li>
</ol>
<p>But some have suggested we don’t need an independent level of representation called ‘argument structure’ (Goldberg, 1985; a Construction Grammar Approach to Argument Structure)</p>
</section>
<section id="d.-what-is-the-mapping-process" class="level3">
<h3 class="anchored" data-anchor-id="d.-what-is-the-mapping-process">d.&nbsp;What is the mapping process?</h3>
<p>Verbs must be linked to surface positions. This is called <em>mapping</em> or <em>linking</em>.</p>
<p>How do we know which position to link to?</p>
<p>Old approach (Breedin, 1996; Levin &amp; Hovav, 1995) - line up thematic roles in a particular order, and map them one-by-one to available surface positions. Sometimes called “linking rules”</p>
<p>New approach (Goldberg, 1995)- Grammatical constructions specify which arguments are required in each slot, e.g.</p>
<ol type="1">
<li>AGENT + Verb + PATIENT (the transitive schema)</li>
<li>AGENT + Verb + BENEFACTIVE + PATIENT (the ditransitive schema)</li>
</ol>
<p>This approach can be demonstrated by sentences which “squish” verbs into argument structure constructions where they do not usually occur</p>
<ol type="1">
<li>AGENT + Verb + PATIENT + LOCATION (locative)</li>
<li>She sneezed the handkerchief off the table.</li>
</ol>
</section>
<section id="e.-why-is-argument-structure-important" class="level3">
<h3 class="anchored" data-anchor-id="e.-why-is-argument-structure-important">e. Why is Argument structure important</h3>
<p>The verb and its arguments form the “core” of the sentence</p>
<p>Difficulties with arguments and argument structure will affect communication</p>
</section>
</section>
<section id="what-can-go-wrong" class="level2">
<h2 class="anchored" data-anchor-id="what-can-go-wrong">2. What can go wrong?</h2>
<p><strong>Difficulties with verb meanings</strong>. Poor knowledge of verb meanings -&gt; poor knowledge of thematic roles -&gt; omission of thematic roles.</p>
<p><strong>Difficulties with argument structure itself</strong>. Good knowledge of verb meanings, but poor knowledge of thematic roles.</p>
<p><strong>Mapping difficulties</strong>. Good knowledge of argument structure, but difficulties mapping this onto surface form. Difficulties could arise from;</p>
<ol type="1">
<li>Incomplete knowledge of the semantic properties of particular constructions (e.g.&nbsp;what roles come in what slots)</li>
<li>Processing difficulties leading to accidental mis-selection of appropriate frame.</li>
</ol>
<p>What’s gone wrong with these examples?</p>
<ol type="1">
<li>He filled the water into the glass.</li>
<li>He filled the water with glass.</li>
<li>He did the ball into the hole.</li>
<li>She did the newspaper</li>
<li>She put the box</li>
<li>He went it very fast</li>
<li>Mary gave the ball John</li>
</ol>
<p>What level of representation is being tested by the following? (examples from Marshall, Chiat, &amp; Pring, 1997)</p>
<ol type="1">
<li>Do the following sentences sound okay?</li>
</ol>
<ol type="a">
<li><pre><code>   The thug dies the woman</code></pre></li>
<li><pre><code>The policeman shoots the thief</code></pre></li>
<li><pre><code>The woman spills the floor</code></pre></li>
<li><pre><code>The woman murders the table</code></pre></li>
<li><pre><code>The man skates the ice</code></pre></li>
</ol>
<ol start="2" type="1">
<li>Which word is the odd one out?</li>
</ol>
<ol type="a">
<li><pre><code>   The man / the newspaper / the television / reads</code></pre></li>
<li><pre><code>The hammer / sharpens / the man / the knife</code></pre></li>
<li><pre><code>the water / the glass / pours / the man</code></pre></li>
<li><pre><code>the water / the jug / fills / the man</code></pre></li>
</ol>
</section>
<section id="aphasia" class="level2">
<h2 class="anchored" data-anchor-id="aphasia">3. Aphasia</h2>
<section id="a.-what-does-aphasic-speech-look-like" class="level3">
<h3 class="anchored" data-anchor-id="a.-what-does-aphasic-speech-look-like">a. What does aphasic speech look like?</h3>
<p>Low Type Token Ratio for verbs (TTR) (Bastiaanse &amp; Bol, 2001; Berndt, Haendiges, Mitchum, &amp; Sandson, 1997). Driven by heavy reliance on “light” verbs, e.g.&nbsp;<em>make, put, do</em></p>
<p>Reliance on low-valency structures (few 3-place predicates) &amp; difficulties using sentential complements (e.g.&nbsp;Jack said that he was hungry) (Thompson et al., 1995, 1997; Webster, Franklin, &amp; Howard, 2001, 2007)</p>
<p>High rates of sentences without obvious thematic role, e.g.&nbsp;lacking verb (e.g.&nbsp;<em>the princess…</em>) (Kim &amp; Thompson, 2000; Webster et al., 2001, 2007)</p>
<p>Omission of obligatory arguments, e.g.&nbsp;<em>Cinderella got…</em>, <em>Janet put the book…</em> (Webster et al.&nbsp;2001, 2007)</p>
<p>No significant difference in profiles of fluent versus non-fluent aphasics (Kim &amp; Thomson, 2000; Webster et al.&nbsp;2001, 2007)</p>
<p>According to Webster et al.&nbsp;(2001, 2007) Sensitive indicators were;</p>
<ol type="1">
<li>No thematic relation &gt; 8.5%</li>
<li>one-place predicate &gt; 23%</li>
<li>two-place predicate &lt; 41%</li>
<li>three-place predicate &lt; 7%</li>
<li>Omission of obligatory arguments &gt; 2% of sentences Use of adverbials / complexity of phrases did not distinguish groups.</li>
</ol>
</section>
<section id="b.-difficulties-with-verb-representations" class="level3">
<h3 class="anchored" data-anchor-id="b.-difficulties-with-verb-representations">b. Difficulties with verb representations</h3>
<p>Difficulties naming verbs (Berndt et al.&nbsp;1997; Kim &amp; Thompson, 2000; Marshall et al.&nbsp;2007). Possible semantic difficulties with verbs which are likely to impact on argument structure.</p>
<p>Kim &amp; Thompson (2000) - retrieval of verbs in isolation affected by valency -&gt; AS is an integral part of verb representation</p>
<p>Verb naming difficulties are associated with comprehension of semantically-reversible sentences, e.g.&nbsp;<em>the boy is kissing the girl, the girl was kissed by the boy</em> (Berndt et al.&nbsp;1997) –&gt; Semantic difficulties?</p>
<p>Difficulties identifying ungrammaticality related to subcategorisation (e.g.&nbsp;<em>the woman spills the floor</em>) (Marshall et al.&nbsp;2007)</p>
<p>But good understanding of “selectional restrictions” suggests (at least partially) intact semantic representations (e.g.&nbsp;Marshall et al.&nbsp;2007)</p>
<p>Some individuals with good verb retrieval, or individuals supplied with verb, still have difficulties with Argument Structure (Berndt et al., 1997; Caramazza &amp; Hillis, 1989)</p>
</section>
<section id="c.-difficulties-with-mapping" class="level3">
<h3 class="anchored" data-anchor-id="c.-difficulties-with-mapping">c.&nbsp;Difficulties with mapping?</h3>
<p>Misunderstanding of “reversible” sentences, in particular passive sentences (Berndt et al., 1997; Berndt, Mitchum, &amp; Haendiges, 1996)</p>
</section>
<section id="d.-difficulties-with-syntax-positional-level" class="level3">
<h3 class="anchored" data-anchor-id="d.-difficulties-with-syntax-positional-level">d.&nbsp;Difficulties with syntax (positional level)?</h3>
<p>Individuals with aphasia are good at identifying ungrammatical sentences (e.g.&nbsp;Linebarger, Schwartz, &amp; Saffran, 1983)</p>
</section>
</section>
<section id="language-impairments-in-children" class="level2">
<h2 class="anchored" data-anchor-id="language-impairments-in-children">4. Language impairments in children</h2>
<section id="a.-what-does-the-speech-of-language-impaired-children-sound-like-from-an-as-perspective" class="level3">
<h3 class="anchored" data-anchor-id="a.-what-does-the-speech-of-language-impaired-children-sound-like-from-an-as-perspective">a. What does the speech of language-impaired children sound like (from an AS perspective)?</h3>
<p>Low type-token ratios (Bastiaanse &amp; Bol, 2001)</p>
<p>Omission of subject arguments (Grela, 2003) - a pattern found in young typically developing children</p>
<p>Thordardottir &amp; Ellis Weismer (Thordardottir &amp; Weismer, 2002) - Narrow range of thematic roles (SLI &lt; TD-AM &amp; TD-MLU)</p>
<p>Range of Predicate Argument Structures (SLI &lt; TD-AM, TD-MLU)</p>
<p>Number of alternations (same verb used in different frames); SLI &lt; TD-AM &amp; TD-MLU</p>
<p>Overall findings</p>
<ol type="a">
<li><p>PAS correct, but <strong>less-sophisticated.</strong></p></li>
<li><p>Need to increase verb diversity and range of frames used with each verb (alternations)</p></li>
</ol>
</section>
<section id="b.-difficulties-with-verb-representation" class="level3">
<h3 class="anchored" data-anchor-id="b.-difficulties-with-verb-representation">b. Difficulties with verb representation</h3>
<p>Poor at learning new verbs (Oetting, Rice, &amp; Swank, 1995)</p>
</section>
<section id="c.-difficulties-with-mapping-1" class="level3">
<h3 class="anchored" data-anchor-id="c.-difficulties-with-mapping-1">c.&nbsp;Difficulties with mapping</h3>
<p>Arguments may be omitted (Grela, 2003)</p>
<p>Use of “light” verbs, e.g.&nbsp;<em>do, make, get, put…</em></p>
<p>Poor use of syntactic alternations. E.g. where a verb alternates, they tend to use it in only one of the frames (Bastiaanse &amp; Bol, 2001)</p>
<p>Limited general knowledge of argument structure. They avoid using novel verbs in unheard verb + frame combinations (Skipp, Windfuhr, &amp; Conti-Ramsden, 2002)</p>
<p>Use of verbs with the wrong frame, (e.g.&nbsp;Ebbels, van der Lely, &amp; Dockrell, 2007)</p>
<ol type="1">
<li>He filled the water into the glass.</li>
<li>The girl is filling the water into the cup.</li>
</ol>
<p>This is often descibed as a difficulty with argument structure. but is it really? All of the thematic roles are realised, but <strong>the wrong frame has been chosen</strong>. This could arise from</p>
<ol type="1">
<li>Faulty knowledge of semantic properties of slots</li>
<li>Difficulties with processing mechanisms which carry out the mapping</li>
</ol>
</section>
</section>
<section id="suggestions-for-intervention" class="level2">
<h2 class="anchored" data-anchor-id="suggestions-for-intervention">5. Suggestions for intervention</h2>
<p>The most common approach for both SLI and aphasia focuses on mapping.</p>
<p>Colourful semantics (Bryan, 1997) / Sentence Query Therapy (Jones, 1986). Both associate colours with particular thematic roles</p>
<p>Ebbels Shape Coding focuses on syntax. Uses shapes to represent different syntactic functions. However, the shapes also correspond broadly to thematic roles. She has used this to teach argument structure (Ebbels et al., 2007)</p>
</section>
<section id="bibliography" class="level2">
<h2 class="anchored" data-anchor-id="bibliography">Bibliography</h2>
<p>Bastiaanse, R., &amp; Bol, G. (2001). Verb inflection and verb diversity in three populations: Agrammatic speakers, normally developing children, and children with specific language impairment (SLI). <em>Brain and Language</em>, <em>77</em>(3), 274–282.</p>
<p>Berndt, R. S., Haendiges, A. N., Mitchum, C. C., &amp; Sandson, J. (1997). Verb retrieval in aphasia. 2. Relationship to sentence processing. <em>Brain and Language</em>, <em>56</em>(1), 107–137.</p>
<p>Berndt, R. S., Mitchum, C. C., &amp; Haendiges, A. N. (1996). Comprehension of reversible sentences in “agrammatism”: A meta-analysis. <em>Cognition</em>, <em>58</em>(3), 289–308.</p>
<p>Breedin, S. D. (1996). Patterns of verb impairment in aphasia: An analysis of four cases. <em>Cognitive Neuropsychology</em>, <em>13</em>(1), 51–92.</p>
<p>Bryan, A. (1997). Colourful semantics: Thematic role therapy. <em>Language Disorders in Children and Adults: Psycholinguistic Approaches to Therapy</em>, 143–161.</p>
<p>Caramazza, A., &amp; Hillis, A. E. (1989). The disruption of sentence production: Some dissociations. <em>Brain and Language</em>, <em>36</em>(4), 625–650.</p>
<p>Ebbels, S. H., van der Lely, H. K. J., &amp; Dockrell, J. E. (2007). Intervention for Verb Argument Structure in Children With Persistent SLI: A Randomized Control Trial. <em>Journal of Speech, Language and Hearing Research</em>, <em>50</em>(5), 1330.</p>
<p>Goldberg, A. E. (1995). <em>Constructions: a Construction Grammar approach to argument structure</em>. University of Chicago Press.</p>
<p>Grela, B. G. (2003). The omission of subject arguments in children with Specific Language Impairment. <em>Clinical Linguistics &amp; Phonetics</em>, <em>17</em>(2), 153–169. http://doi.org/10.1080/0269920031000061812</p>
<p>Jones, E. V. (1986). Building the foundations for sentence production in a non-fluent aphasic. <em>British Journal of Disorders in Communication</em>, <em>21</em>(1).</p>
<p>Kim, M., &amp; Thompson, C. K. (2000). Patterns of comprehension and production of nouns and verbs in agrammatism: Implications for lexical organization. <em>Brain and Language</em>, <em>74</em>(1), 1–25.</p>
<p>Levin, B., &amp; Hovav, M. R. (1995). <em>Unaccusativity: At the syntax-lexical semantics interface</em> (Vol. 26). MIT press.</p>
<p>Linebarger, M. C., Schwartz, M. F., &amp; Saffran, E. M. (1983). Sensitivity to grammatical structure in so-called agrammatic aphasics. <em>Cognition</em>, <em>13</em>(3), 361–392.</p>
<p>Marshall, J., Chiat, S., &amp; Pring, T. (1997). An impairment in processing verbs’ thematic roles: A therapy study. <em>Aphasiology</em>, <em>11</em>(9), 855–876.</p>
<p>Oetting, J., Rice, M. L., &amp; Swank, L. (1995). Quick Incidental Learning (QUIL) of words by school-age children with and without SLI. <em>Journal of Speech and Hearing Research</em>, <em>38</em>, 434 – 445.</p>
<p>Skipp, A., Windfuhr, K., &amp; Conti-Ramsden, G. (2002). Children’s grammatical categories of verb and noun: a comparative look at children with Specific Language Impairment (SLI) and normal language (NL). <em>International Journal of Language and Communication Disorders</em>, <em>37</em>(3), 253 – 271.</p>
<p>Thompson, C. K., Shapiro, L. P., Ballard, K. J., Jacobs, B. J., Schneider, S. S., &amp; Tait, M. E. (1997). Training and generalized production of wh-and NP-movement structures in agrammatic aphasia. <em>Journal of Speech, Language, and Hearing Research</em>, <em>40</em>(2), 228.</p>
<p>Thompson, C. K., Shapiro, L. P., Tait, M. E., Jacobs, B., Schneider, S., &amp; Ballard, K. (1995). A system for the linguistic analysis of agrammatic language production. <em>Brain and Language</em>, <em>51</em>(1), 124–129.</p>
<p>Thordardottir, E. T., &amp; Weismer, S. E. (2002). Verb argument structure weakness in specific language impairment in relation to age and utterance length. <em>Clinical Linguistics &amp;# 38; Phonetics</em>, <em>16</em>(4), 233–250.</p>
<p>Webster, J., Franklin, S., &amp; Howard, D. (2001). An Investigation of the Interaction between Thematic and Phrasal Structure in Nonfluent Agrammatic Subjects. <em>Brain and Language</em>, <em>78</em>(2), 197–211. http://doi.org/10.1006/brln.2001.2460</p>
<p>Webster, J., Franklin, S., &amp; Howard, D. (2007). An analysis of thematic and phrasal structure in people with aphasia: What more can we learn from the story of Cinderella? <em>Journal of Neurolinguistics</em>, <em>20</em>(5), 363–394. http://doi.org/10.1016/j.jneuroling.2007.02.002</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>